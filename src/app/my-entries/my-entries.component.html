<sky-alert *ngIf="showError" alertType="danger">
  {{ errorMsg }}
</sky-alert>

<!-- Login Required Message -->
<div *ngIf="!isAuthenticated" style="text-align: center; padding: 40px; background-color: #f5f5f5; margin: 20px; border-radius: 8px;">
  <h2 style="color: #333; margin-bottom: 20px;">Login Required</h2>
  <p style="color: #666; margin-bottom: 30px; font-size: 16px;">
    You must be logged in to view your entries. Please log in to continue.
  </p>
  <button 
    (click)="login()" 
    style="background-color: #014d0e; color: white; padding: 12px 30px; border: none; border-radius: 4px; font-size: 16px; cursor: pointer; font-weight: 600;"
  >
    Go to Login
  </button>
</div>

<!-- My Profile -->
<main *ngIf="isAuthenticated">
  <h1 class="header">My Profile</h1>

  <!-- Profile Details Section -->
  <div class="profile-details-section">
    <div class="profile-details-content">
      <div class="detail-item">
        <span class="detail-label">Username</span>
        <span class="detail-value">{{ username }}</span>
      </div>
      <div class="detail-item">
        <span class="detail-label">Email</span>
        <span class="detail-value">{{ email }}</span>
      </div>
      <div class="detail-item">
        <span class="detail-label">Competing Since</span>
        <span class="detail-value" *ngIf="competingSince">{{ competingSince }}</span>
        <span class="detail-value" *ngIf="!competingSince">No entries yet</span>
      </div>
      <div class="detail-item">
        <span class="detail-label">Total Entries</span>
        <span class="detail-value">{{ totalEntries }}</span>
      </div>
    </div>
  </div>

  <!-- Empty State -->
  <div *ngIf="entries.length === 0 && !isLoading" class="empty-state">
    <p>No entries found. <a [routerLink]="['/picks']" style="color: #014d0e; text-decoration: underline; font-weight: 600;">Create one now!</a></p>
  </div>

  <!-- Entries Table -->
  <div *ngIf="entries.length > 0" class="entries-container">
    <h2 class="entries-header">My Entries</h2>
    <table class="entries-table">
      <thead>
        <tr>
          <th>Year</th>
          <th>Entry Name</th>
          <th>Submitted Date</th>
          <th>Games</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let entry of entries" [class.locked-entry]="!entry.isEditable">
          <td class="entry-year">{{ entry.year }}</td>
          <td class="entry-name">{{ entry.name }}</td>
          <td class="entry-date">{{ formatDate(entry.created_date) }}</td>
          <td class="entry-games">{{ entry.gameCount }} Games</td>
          <td class="entry-status">
            <span *ngIf="entry.isEditable" class="status-badge editable">
              âœ“ Editable
            </span>
            <span *ngIf="!entry.isEditable" class="status-badge locked">
              ðŸ”’ Locked
            </span>
          </td>
          <td class="entry-actions">
            <button 
              (click)="editEntry(entry)"
              class="action-btn"
              [class.edit-btn]="isAdmin && entry.isEditable"
              [class.view-btn]="!isAdmin || !entry.isEditable"
              [title]="isAdmin ? (entry.isEditable ? 'Edit this entry' : 'View this entry (read-only)') : 'View this entry'"
            >
              {{ isAdmin ? (entry.isEditable ? 'Edit' : 'View') : 'View' }}
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</main>
